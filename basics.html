<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="统计学基础 - 学习均值、中位数、众数、方差、标准差等核心概念">
  <title>统计学基础 - 统计学学习平台</title>
  <link rel="stylesheet" href="assets/bootstrap-custom.css">
  <link rel="stylesheet" href="assets/katex-custom.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="main-content">
    <div class="basics-page">
      <h1 class="page-title">统计学基础</h1>

      <div class="content-card">
        <h2 class="card-title">📊 什么是统计学？</h2>
        <p>
          统计学是收集、分析、解释和展示数据的科学。它帮助我们理解数据中的模式和趋势，
          做出基于证据的决策。统计学广泛应用于科学研究、商业分析、医疗保健、社会科学等领域。
        </p>
      </div>

      <div class="content-card">
        <h2 class="card-title">📈 描述性统计</h2>

        <h3 class="mt-4 mb-3">1. 集中趋势度量</h3>

        <div class="mb-4">
          <h4>均值 (Mean)</h4>
          <p>均值是所有数据的总和除以数据的数量。</p>
          <div class="formula-box">
            $$\bar{x} = \frac{\sum_{i=1}^{n} x_i}{n}$$
          </div>
          <p class="text-muted">其中 $\bar{x}$ 是均值，$x_i$ 是每个数据点，$n$ 是数据总数。</p>
        </div>

        <div class="mb-4">
          <h4>中位数 (Median)</h4>
          <p>中位数是将数据按顺序排列后位于中间位置的值。对于偶数个数据，中位数是中间两个数的平均值。</p>
        </div>

        <div class="mb-4">
          <h4>众数 (Mode)</h4>
          <p>众数是数据中出现频率最高的值。</p>
        </div>

        <h3 class="mt-5 mb-3">2. 离散程度度量</h3>

        <div class="mb-4">
          <h4>方差 (Variance)</h4>
          <p>方差衡量数据点与均值的偏离程度。</p>
          <div class="formula-box">
            $$\sigma^2 = \frac{\sum_{i=1}^{n} (x_i - \bar{x})^2}{n}$$
          </div>
        </div>

        <div class="mb-4">
          <h4>标准差 (Standard Deviation)</h4>
          <p>标准差是方差的平方根，与数据具有相同的单位。</p>
          <div class="formula-box">
            $$\sigma = \sqrt{\frac{\sum_{i=1}^{n} (x_i - \bar{x})^2}{n}}$$
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">📊 其他常用统计量</h2>

        <h3 class="mt-4 mb-3">3. 位置度量</h3>

        <div class="mb-4">
          <h4>四分位数 (Quartiles)</h4>
          <p>将数据分为四个相等的部分，常用 Q1（下四分位数）、Q2（中位数）、Q3（上四分位数）表示。</p>
          <ul>
            <li><strong>Q1 (25%)</strong>：25% 的数据小于此值</li>
            <li><strong>Q2 (50%)</strong>：中位数</li>
            <li><strong>Q3 (75%)</strong>：75% 的数据小于此值</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>分析收入分布、考试成绩等级划分、箱线图绘制</p>
        </div>

        <div class="mb-4">
          <h4>百分位数 (Percentiles)</h4>
          <p>将数据分为100个相等的部分，Pₚ 表示有 p% 的数据小于此值。</p>
          <p class="text-muted"><strong>应用：</strong>标准化考试分数排名（如 SAT、GRE）、儿童发育评估、健康指标评估</p>
        </div>

        <div class="mb-4">
          <h4>几何平均数 (Geometric Mean)</h4>
          <p>n 个正数的乘积的 n 次方根。</p>
          <div class="formula-box">
            $$G = \sqrt[n]{x_1 \times x_2 \times \cdots \times x_n}$$
          </div>
          <p class="text-muted"><strong>应用：</strong>计算平均增长率（如 GDP 增长、投资回报率）、比率数据的平均值</p>
        </div>

        <div class="mb-4">
          <h4>调和平均数 (Harmonic Mean)</h4>
          <p>数值倒数的算术平均数的倒数。</p>
          <div class="formula-box">
            $$H = \frac{n}{\frac{1}{x_1} + \frac{1}{x_2} + \cdots + \frac{1}{x_n}}$$
          </div>
          <p class="text-muted"><strong>应用：</strong>计算平均速率（如往返行程）、平均价格（固定预算下）、F-score 评价指标</p>
        </div>

        <h3 class="mt-5 mb-3">4. 离散程度度量</h3>

        <div class="mb-4">
          <h4>极差 (Range)</h4>
          <p>最大值与最小值之差。</p>
          <div class="formula-box">
            $$R = x_{max} - x_{min}$$
          </div>
          <p class="text-muted"><strong>应用：</strong>质量控制（监测波动范围）、天气预报（温差分析）、价格区间展示</p>
        </div>

        <div class="mb-4">
          <h4>四分位距 (Interquartile Range, IQR)</h4>
          <p>上四分位数与下四分位数之差，不受极端值影响。</p>
          <div class="formula-box">
            $$IQR = Q_3 - Q_1$$
          </div>
          <p class="text-muted"><strong>应用：</strong>检测离群值、稳健的离散程度度量、箱线图的核心指标</p>
        </div>

        <div class="mb-4">
          <h4>变异系数 (Coefficient of Variation, CV)</h4>
          <p>标准差与均值的比值，用百分比表示。</p>
          <div class="formula-box">
            $$CV = \frac{\sigma}{\mu} \times 100\%$$
          </div>
          <p class="text-muted"><strong>应用：</strong>比较不同量纲数据的离散程度（如身高与体重）、风险评估、投资组合比较</p>
        </div>

        <div class="mb-4">
          <h4>平均绝对偏差 (Mean Absolute Deviation, MAD)</h4>
          <p>每个数据点与均值之差的绝对值的平均。</p>
          <div class="formula-box">
            $$MAD = \frac{1}{n}\sum_{i=1}^{n}|x_i - \bar{x}|$$
          </div>
          <p class="text-muted"><strong>应用：</strong>需求预测误差评估、稳健的离散程度度量、异常检测</p>
        </div>

        <h3 class="mt-5 mb-3">5. 分布形状度量</h3>

        <div class="mb-4">
          <h4>偏度 (Skewness)</h4>
          <p>衡量数据分布的不对称性。</p>
          <ul>
            <li><strong>正偏 (右偏)</strong>：偏度 > 0，尾部向右延伸</li>
            <li><strong>负偏 (左偏)</strong>：偏度 < 0，尾部向左延伸</li>
            <li><strong>对称</strong>：偏度 ≈ 0，如正态分布</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>收入分布分析（通常右偏）、投资回报分析、金融风险评估</p>
        </div>

        <div class="mb-4">
          <h4>峰度 (Kurtosis)</h4>
          <p>衡量数据分布的尖锐程度或平坦程度。</p>
          <ul>
            <li><strong>尖峰分布</strong>：峰度 > 3，数据更集中在均值附近</li>
            <li><strong>平峰分布</strong>：峰度 < 3，数据更分散</li>
            <li><strong>正态分布</strong>：峰度 = 3</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>金融风险管理（尾部风险分析）、质量控制、信号处理</p>
        </div>

        <h3 class="mt-5 mb-3">6. 数据标准化</h3>

        <div class="mb-4">
          <h4>标准分数 (Z-Score)</h4>
          <p>表示一个数值与均值之间的距离，以标准差为单位。</p>
          <div class="formula-box">
            $$z = \frac{x - \mu}{\sigma}$$
          </div>
          <p class="text-muted"><strong>应用：</strong>考试成绩标准化比较、异常值检测（|z| > 3）、机器学习特征标准化</p>
        </div>

        <div class="mb-4">
          <h4>离群值 (Outliers)</h4>
          <p>与大多数数据显著不同的异常观测值。</p>
          <p><strong>检测方法：</strong></p>
          <ul>
            <li>四分位距法：小于 Q₁ - 1.5×IQR 或大于 Q₃ + 1.5×IQR</li>
            <li>Z-score 法：|z| > 3</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>欺诈检测、质量控制异常监测、数据清洗、医疗异常诊断</p>
        </div>

        <h3 class="mt-5 mb-3">7. 关联性度量</h3>

        <div class="mb-4">
          <h4>协方差 (Covariance)</h4>
          <p>衡量两个变量一起变化的程度。</p>
          <div class="formula-box">
            $$Cov(X,Y) = \frac{1}{n}\sum_{i=1}^{n}(x_i - \bar{x})(y_i - \bar{y})$$
          </div>
          <ul>
            <li>正值：正相关（一个变量增加，另一个也增加）</li>
            <li>负值：负相关（一个变量增加，另一个减少）</li>
            <li>零值：无线性关系</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>投资组合风险评估、经济学变量分析、气象数据关联分析</p>
        </div>

        <div class="mb-4">
          <h4>皮尔逊相关系数 (Pearson Correlation Coefficient)</h4>
          <p>衡量两个变量之间的线性相关强度，取值范围 [-1, 1]。</p>
          <div class="formula-box">
            $$r = \frac{\sum_{i=1}^{n}(x_i - \bar{x})(y_i - \bar{y})}{\sqrt{\sum_{i=1}^{n}(x_i - \bar{x})^2}\sqrt{\sum_{i=1}^{n}(y_i - \bar{y})^2}}$$
          </div>
          <ul>
            <li>r = 1：完全正相关</li>
            <li>r = -1：完全负相关</li>
            <li>r = 0：无线性相关</li>
            <li>|r| > 0.7：强相关</li>
            <li>0.3 < |r| < 0.7：中等相关</li>
            <li>|r| < 0.3：弱相关</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>市场调研（产品关联度分析）、教育研究（学习时间与成绩关系）、医学研究（风险因素分析）</p>
        </div>

        <div class="mb-4">
          <h4>斯皮尔曼等级相关系数 (Spearman's Rank Correlation)</h4>
          <p>基于变量秩次的相关系数，用于衡量单调关系。</p>
          <p class="text-muted"><strong>应用：</strong>非线性关系分析、问卷调查满意度排序、体育比赛排名分析</p>
        </div>

        <h3 class="mt-5 mb-3">8. 频数分布</h3>

        <div class="mb-4">
          <h4>频数分布表</h4>
          <p>将数据按数值大小分组，统计每组中数据出现的次数。</p>
          <p class="text-muted"><strong>应用：</strong>人口年龄结构分析、考试成绩分布、销售数据区间统计</p>
        </div>

        <div class="mb-4">
          <h4>直方图 (Histogram)</h4>
          <p>用矩形的高度表示各组频数的图形，常用于展示数据分布形态。</p>
          <p class="text-muted"><strong>应用：</strong>数据质量检查、分布模式识别、异常值可视化</p>
        </div>

        <div class="mb-4">
          <h4>箱线图 (Box Plot)</h4>
          <p>基于五数概括（最小值、Q1、中位数、Q3、最大值）的图形，能清晰展示数据分布和离群值。</p>
          <p class="text-muted"><strong>应用：</strong>多组数据比较、离群值检测、质量控制监控</p>
        </div>

        <h3 class="mt-5 mb-3">9. 特殊统计量</h3>

        <div class="mb-4">
          <h4>标准误差 (Standard Error, SE)</h4>
          <p>样本统计量的标准差，用于衡量抽样误差的大小。</p>
          <div class="formula-box">
            $$SE = \frac{\sigma}{\sqrt{n}}$$
          </div>
          <p class="text-muted"><strong>应用：</strong>置信区间计算、假设检验、样本量确定</p>
        </div>

        <div class="mb-4">
          <h4>自由度 (Degrees of Freedom)</h4>
          <p>统计量中可以自由变化的数据个数。</p>
          <p class="text-muted"><strong>应用：</strong>t 检验、卡方检验、方差分析（ANOVA）中的关键参数</p>
        </div>

        <div class="mb-4">
          <h4>效应量 (Effect Size)</h4>
          <p>衡量统计显著性的实际意义，表示差异或关联的强度。</p>
          <p class="text-muted"><strong>应用：</strong>元分析、干预效果评估、临床研究（如 Cohen's d）</p>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">🧮 交互式计算器</h2>
        <p>输入一组数据（用逗号分隔），计算各种统计量：</p>

        <div class="mb-3">
          <label class="form-label">数据（用逗号分隔）：</label>
          <input
            type="text"
            class="form-control"
            id="dataInput"
            placeholder="例如：10, 20, 30, 40, 50"
            value="10, 20, 30, 40, 50"
          />
        </div>

        <button class="btn btn-custom btn-primary-custom" onclick="calculateStats()">
          计算统计量
        </button>

        <div id="statsResult" class="mt-4" style="display: none;">
          <h4 class="mb-3">计算结果：</h4>
          
          <h5 class="mt-4 mb-3">集中趋势</h5>
          <div class="row">
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">μ</div>
                  <div>
                    <strong>均值：</strong> <span id="meanValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">M</div>
                  <div>
                    <strong>中位数：</strong> <span id="medianValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-green">Mo</div>
                  <div>
                    <strong>众数：</strong> <span id="modeValue"></span>
                  </div>
                </li>
              </ul>
            </div>
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">G</div>
                  <div>
                    <strong>几何平均：</strong> <span id="geometricMeanValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">H</div>
                  <div>
                    <strong>调和平均：</strong> <span id="harmonicMeanValue"></span>
                  </div>
                </li>
              </ul>
            </div>
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-green">Q1</div>
                  <div>
                    <strong>下四分位：</strong> <span id="q1Value"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-blue">Q3</div>
                  <div>
                    <strong>上四分位：</strong> <span id="q3Value"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">IQR</div>
                  <div>
                    <strong>四分位距：</strong> <span id="iqrValue"></span>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <h5 class="mt-4 mb-3">离散程度</h5>
          <div class="row">
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">σ²</div>
                  <div>
                    <strong>方差：</strong> <span id="varianceValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">σ</div>
                  <div>
                    <strong>标准差：</strong> <span id="stdDevValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-green">R</div>
                  <div>
                    <strong>极差：</strong> <span id="rangeValue"></span>
                  </div>
                </li>
              </ul>
            </div>
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">CV</div>
                  <div>
                    <strong>变异系数：</strong> <span id="cvValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">MAD</div>
                  <div>
                    <strong>平均绝对偏差：</strong> <span id="madValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-green">SE</div>
                  <div>
                    <strong>标准误差：</strong> <span id="seValue"></span>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <h5 class="mt-4 mb-3">分布形状</h5>
          <div class="row">
            <div class="col-md-6">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">Skew</div>
                  <div>
                    <strong>偏度：</strong> <span id="skewnessValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">Kurt</div>
                  <div>
                    <strong>峰度：</strong> <span id="kurtosisValue"></span>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <h5 class="mt-4 mb-3">标准化数据（Z-Score）</h5>
          <div id="zscoreResult" class="content-card" style="background: rgba(33, 150, 243, 0.05);">
            <div class="row">
              <div class="col-md-6">
                <strong>原始数据：</strong> <span id="originalData"></span>
              </div>
              <div class="col-md-6">
                <strong>Z-Score：</strong> <span id="zscoreData"></span>
              </div>
            </div>
          </div>

          <div class="chart-container mt-4">
            <canvas id="dataChart"></canvas>
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">💡 实际应用</h2>
        <ul class="feature-list">
          <li>
            <div class="feature-icon icon-blue">🏢</div>
            <div>
              <strong>商业分析：</strong> 分析销售数据、客户行为，优化业务决策
            </div>
          </li>
          <li>
            <div class="feature-icon icon-pink">🏥</div>
            <div>
              <strong>医疗研究：</strong> 评估治疗效果、疾病流行趋势
            </div>
          </li>
          <li>
            <div class="feature-icon icon-green">📊</div>
            <div>
              <strong>质量控制：</strong> 监测生产过程中的产品一致性
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <script src="assets/bootstrap-custom.js"></script>
  <script src="assets/katex-custom.js"></script>
  <script src="assets/chartjs-custom.js"></script>
  <script>
    let chartInstance = null;

    function calculateStats() {
      const input = document.getElementById('dataInput').value;
      const numbers = input.split(',').map(n => parseFloat(n.trim())).filter(n => !isNaN(n));

      if (numbers.length === 0) {
        alert('请输入有效的数据');
        return;
      }

      const sorted = [...numbers].sort((a, b) => a - b);
      const n = numbers.length;
      const sum = numbers.reduce((a, b) => a + b, 0);
      const mean = sum / n;
      
      // 中位数
      const median = n % 2 === 0
        ? (sorted[n / 2 - 1] + sorted[n / 2]) / 2
        : sorted[Math.floor(n / 2)];

      // 众数
      const modeMap = numbers.reduce((acc, num) => {
        acc[num] = (acc[num] || 0) + 1;
        return acc;
      }, {});
      const maxCount = Math.max(...Object.values(modeMap));
      const modeValue = Object.entries(modeMap).filter(([_, count]) => count === maxCount).map(([num]) => num).join(', ');

      // 四分位数
      const getQuartile = (arr, q) => {
        const pos = (arr.length - 1) * q;
        const base = Math.floor(pos);
        const rest = pos - base;
        if (arr[base + 1] !== undefined) {
          return arr[base] + rest * (arr[base + 1] - arr[base]);
        } else {
          return arr[base];
        }
      };
      const q1 = getQuartile(sorted, 0.25);
      const q3 = getQuartile(sorted, 0.75);
      const iqr = q3 - q1;

      // 几何平均数（仅正数）
      let geometricMean = 'N/A';
      if (numbers.every(x => x > 0)) {
        geometricMean = Math.pow(numbers.reduce((a, b) => a * b, 1), 1 / n).toFixed(4);
      }

      // 调和平均数（非零且同号）
      let harmonicMean = 'N/A';
      if (numbers.every(x => x !== 0) && numbers.every(x => x > 0)) {
        harmonicMean = (n / numbers.reduce((a, b) => a + 1/b, 0)).toFixed(4);
      }

      // 方差和标准差
      const variance = numbers.reduce((acc, num) => acc + Math.pow(num - mean, 2), 0) / n;
      const stdDev = Math.sqrt(variance);

      // 极差
      const range = sorted[n - 1] - sorted[0];

      // 变异系数
      const cv = mean !== 0 ? ((stdDev / mean) * 100).toFixed(2) + '%' : 'N/A';

      // 平均绝对偏差
      const mad = numbers.reduce((acc, num) => acc + Math.abs(num - mean), 0) / n;

      // 标准误差
      const se = stdDev / Math.sqrt(n);

      // 偏度
      const skewness = n > 2 ? (numbers.reduce((acc, num) => acc + Math.pow((num - mean) / stdDev, 3), 0) / n).toFixed(4) : 'N/A';

      // 峰度
      const kurtosis = n > 3 ? (3 + numbers.reduce((acc, num) => acc + Math.pow((num - mean) / stdDev, 4), 0) / n - 3).toFixed(4) : 'N/A';

      // Z-Score
      const zScores = numbers.map(x => ((x - mean) / stdDev).toFixed(2));

      // 更新显示
      document.getElementById('meanValue').textContent = mean.toFixed(4);
      document.getElementById('medianValue').textContent = median.toFixed(4);
      document.getElementById('modeValue').textContent = modeValue;
      document.getElementById('geometricMeanValue').textContent = geometricMean;
      document.getElementById('harmonicMeanValue').textContent = harmonicMean;
      document.getElementById('q1Value').textContent = q1.toFixed(4);
      document.getElementById('q3Value').textContent = q3.toFixed(4);
      document.getElementById('iqrValue').textContent = iqr.toFixed(4);
      document.getElementById('varianceValue').textContent = variance.toFixed(4);
      document.getElementById('stdDevValue').textContent = stdDev.toFixed(4);
      document.getElementById('rangeValue').textContent = range.toFixed(4);
      document.getElementById('cvValue').textContent = cv;
      document.getElementById('madValue').textContent = mad.toFixed(4);
      document.getElementById('seValue').textContent = se.toFixed(4);
      document.getElementById('skewnessValue').textContent = skewness;
      document.getElementById('kurtosisValue').textContent = kurtosis;
      document.getElementById('originalData').textContent = numbers.map(x => x.toFixed(2)).join(', ');
      document.getElementById('zscoreData').textContent = zScores.join(', ');

      document.getElementById('statsResult').style.display = 'block';

      // 更新图表
      const ctx = document.getElementById('dataChart').getContext('2d');

      if (chartInstance) {
        chartInstance.destroy();
      }

      chartInstance = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: numbers.map((_, i) => `数据${i + 1}`),
          datasets: [{
            label: '数据值',
            data: numbers,
            backgroundColor: numbers.map(x => Math.abs((x - mean) / stdDev) > 2 ? 'rgba(244, 67, 54, 0.6)' : 'rgba(33, 150, 243, 0.6)'),
            borderColor: numbers.map(x => Math.abs((x - mean) / stdDev) > 2 ? 'rgba(244, 67, 54, 1)' : 'rgba(33, 150, 243, 1)'),
            borderWidth: 1,
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'top',
            },
            title: {
              display: true,
              text: `数据分布可视化 (均值: ${mean.toFixed(2)}, 标准差: ${stdDev.toFixed(2)})`,
            },
            annotation: {
              annotations: {
                line1: {
                  type: 'line',
                  yMin: mean,
                  yMax: mean,
                  borderColor: 'rgba(76, 175, 80, 0.8)',
                  borderWidth: 2,
                  borderDash: [5, 5],
                  label: {
                    display: true,
                    content: '均值',
                    position: 'end'
                  }
                }
              }
            }
          },
        }
      });
    }

    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
        ]
      });
    });
  </script>
</body>
</html>