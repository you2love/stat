<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="统计学基础 - 学习均值、中位数、众数、方差、标准差等核心概念">
  <title>统计学基础 - 统计学学习平台</title>
  <link rel="stylesheet" href="assets/bootstrap-custom.css">
  <link rel="stylesheet" href="assets/katex-custom.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-custom sticky-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">📊 统计学学习平台</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">首页</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="sampling.html">设计与抽样</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="basics.html">统计学基础</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="probability.html">概率论</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="inference.html">统计推断</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="data-analysis.html">数据分析流程</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="population.html">人口数据分析</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="traffic-accident-analysis.html">交通事故分析</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="main-content">
    <div class="basics-page">
      <h1 class="page-title">统计学基础</h1>

      <div class="content-card">
        <h2 class="card-title">📊 什么是统计学？</h2>
        <p>
          统计学是收集、分析、解释和展示数据的科学。它帮助我们理解数据中的模式和趋势，
          做出基于证据的决策。统计学广泛应用于科学研究、商业分析、医疗保健、社会科学等领域。
        </p>
      </div>

      <div class="content-card">
        <h2 class="card-title">📈 描述性统计</h2>

        <h3 class="mt-4 mb-3">1. 集中趋势度量</h3>

        <div class="mb-4">
          <h4>均值 (Mean)</h4>
          <p>均值是所有数据的总和除以数据的数量。</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">x̄</span> = <span class="katex-fraction"><span class="katex-numerator"><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup> x<sub class="katex-subscript">i</sub></span><span class="katex-denominator">n</span></span></span></span>
          </div>
          <p class="text-muted">其中 <span class="katex katex-inline"><span class="katex-symbol">x̄</span></span></span> 是均值，<span class="katex katex-inline">x<sub class="katex-subscript">i</sub></span> 是每个数据点，<span class="katex katex-inline">n</span> 是数据总数。</p>
        </div>

        <div class="mb-4">
          <h4>中位数 (Median)</h4>
          <p>中位数是将数据按顺序排列后位于中间位置的值。对于偶数个数据，中位数是中间两个数的平均值。</p>
        </div>

        <div class="mb-4">
          <h4>众数 (Mode)</h4>
          <p>众数是数据中出现频率最高的值。</p>
        </div>

        <h3 class="mt-5 mb-3">2. 离散程度度量</h3>

        <div class="mb-4">
          <h4>方差 (Variance)</h4>
          <p>方差衡量数据点与均值的偏离程度。</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">σ</span><sup class="katex-superscript">2</sup> = <span class="katex-fraction"><span class="katex-numerator"><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup> (x<sub class="katex-subscript">i</sub> - <span class="katex-symbol">x̄</span>)<sup class="katex-superscript">2</sup></span><span class="katex-denominator">n</span></span></span></span>
          </div>
        </div>

        <div class="mb-4">
          <h4>标准差 (Standard Deviation)</h4>
          <p>标准差是方差的平方根，与数据具有相同的单位。</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">σ</span> = <span class="katex-sqrt"><span class="katex-sqrt-root"><span class="katex-fraction"><span class="katex-numerator"><span class="katex-op">∑</span><sub class="katex-subscript">i=1</span></span></span><sup class="katex-superscript">n</sub> (x<sub class="katex-subscript">i</sub> - <span class="katex-symbol">x̄</span>)<sup class="katex-superscript">2</sup></sup>{n}}</span>
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">📊 其他常用统计量</h2>

        <h3 class="mt-4 mb-3">3. 位置度量</h3>

        <div class="mb-4">
          <h4>四分位数 (Quartiles)</h4>
          <p>将数据分为四个相等的部分，常用 Q1（下四分位数）、Q2（中位数）、Q3（上四分位数）表示。</p>
          <ul>
            <li><strong>Q1 (25%)</strong>：25% 的数据小于此值</li>
            <li><strong>Q2 (50%)</strong>：中位数</li>
            <li><strong>Q3 (75%)</strong>：75% 的数据小于此值</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>分析收入分布、考试成绩等级划分、箱线图绘制</p>
        </div>

        <div class="mb-4">
          <h4>百分位数 (Percentiles)</h4>
          <p>将数据分为100个相等的部分，Pₚ 表示有 p% 的数据小于此值。</p>
          <p class="text-muted"><strong>应用：</strong>标准化考试分数排名（如 SAT、GRE）、儿童发育评估、健康指标评估</p>
        </div>

        <div class="mb-4">
          <h4>几何平均数 (Geometric Mean)</h4>
          <p>n 个正数的乘积的 n 次方根。</p>
          <div class="formula-box">
            <span class="katex katex-display">G = <span class="katex-nthroot"><span class="katex-nthroot-index">n</span><span class="katex-nthroot-root">x<sub class="katex-subscript">1</sub> <span class="katex-symbol">×</span> x<sub class="katex-subscript">2</sub> <span class="katex-symbol">×</span> \cdots <span class="katex-symbol">×</span> x<sub class="katex-subscript">n</sub></span></span></span></span>
          </div>
          <p class="text-muted"><strong>应用：</strong>计算平均增长率（如 GDP 增长、投资回报率）、比率数据的平均值</p>
        </div>

        <div class="mb-4">
          <h4>调和平均数 (Harmonic Mean)</h4>
          <p>数值倒数的算术平均数的倒数。</p>
          <div class="formula-box">
            <span class="katex katex-display">H = <span class="katex-fraction"><span class="katex-numerator">n</span><span class="katex-denominator"><span class="katex-fraction"><span class="katex-numerator">1</span></span></span>{x<sub class="katex-subscript">1</sub>} + <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">x<sub class="katex-subscript">2</sub></span></span></span> + \cdots + <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">x<sub class="katex-subscript">n</sub></span></span></span>}</span>
          </div>
          <p class="text-muted"><strong>应用：</strong>计算平均速率（如往返行程）、平均价格（固定预算下）、F-score 评价指标</p>
        </div>

        <h3 class="mt-5 mb-3">4. 离散程度度量</h3>

        <div class="mb-4">
          <h4>极差 (Range)</h4>
          <p>最大值与最小值之差。</p>
          <div class="formula-box">
            <span class="katex katex-display">R = x<sub class="katex-subscript">max</sub> - x<sub class="katex-subscript">min</sub></span>
          </div>
          <p class="text-muted"><strong>应用：</strong>质量控制（监测波动范围）、天气预报（温差分析）、价格区间展示</p>
        </div>

        <div class="mb-4">
          <h4>四分位距 (Interquartile Range, IQR)</h4>
          <p>上四分位数与下四分位数之差，不受极端值影响。</p>
          <div class="formula-box">
            <span class="katex katex-display">IQR = Q<sub class="katex-subscript">3</sub> - Q<sub class="katex-subscript">1</sub></span>
          </div>
          <p class="text-muted"><strong>应用：</strong>检测离群值、稳健的离散程度度量、箱线图的核心指标</p>
        </div>

        <div class="mb-4">
          <h4>变异系数 (Coefficient of Variation, CV)</h4>
          <p>标准差与均值的比值，用百分比表示。</p>
          <div class="formula-box">
            <span class="katex katex-display">CV = <span class="katex-fraction"><span class="katex-numerator"><span class="katex-symbol">σ</span></span></span><span class="katex-denominator"><span class="katex-symbol">μ</span></span></span></span> <span class="katex-symbol">×</span> 100\%</span>
          </div>
          <p class="text-muted"><strong>应用：</strong>比较不同量纲数据的离散程度（如身高与体重）、风险评估、投资组合比较</p>
        </div>

        <div class="mb-4">
          <h4>平均绝对偏差 (Mean Absolute Deviation, MAD)</h4>
          <p>每个数据点与均值之差的绝对值的平均。</p>
          <div class="formula-box">
            <span class="katex katex-display">MAD = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>|x<sub class="katex-subscript">i</sub> - <span class="katex-symbol">x̄</span>|</span>
          </div>
          <p class="text-muted"><strong>应用：</strong>需求预测误差评估、稳健的离散程度度量、异常检测</p>
        </div>

        <h3 class="mt-5 mb-3">5. 分布形状度量</h3>

        <div class="mb-4">
          <h4>偏度 (Skewness)</h4>
          <p>衡量数据分布的不对称性。</p>
          <ul>
            <li><strong>正偏 (右偏)</strong>：偏度 > 0，尾部向右延伸</li>
            <li><strong>负偏 (左偏)</strong>：偏度 < 0，尾部向左延伸</li>
            <li><strong>对称</strong>：偏度 ≈ 0，如正态分布</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>收入分布分析（通常右偏）、投资回报分析、金融风险评估</p>
        </div>

        <div class="mb-4">
          <h4>峰度 (Kurtosis)</h4>
          <p>衡量数据分布的尖锐程度或平坦程度。</p>
          <ul>
            <li><strong>尖峰分布</strong>：峰度 > 3，数据更集中在均值附近</li>
            <li><strong>平峰分布</strong>：峰度 < 3，数据更分散</li>
            <li><strong>正态分布</strong>：峰度 = 3</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>金融风险管理（尾部风险分析）、质量控制、信号处理</p>
        </div>

        <h3 class="mt-5 mb-3">6. 数据标准化</h3>

        <div class="mb-4">
          <h4>标准分数 (Z-Score)</h4>
          <p>表示一个数值与均值之间的距离，以标准差为单位。</p>
          <div class="formula-box">
            <span class="katex katex-display">z = <span class="katex-fraction"><span class="katex-numerator">x - <span class="katex-symbol">μ</span></span></span><span class="katex-denominator"><span class="katex-symbol">σ</span></span></span></span></span></span>
          </div>
          <p class="text-muted"><strong>应用：</strong>考试成绩标准化比较、异常值检测（|z| > 3）、机器学习特征标准化</p>
        </div>

        <div class="mb-4">
          <h4>离群值 (Outliers)</h4>
          <p>与大多数数据显著不同的异常观测值。</p>
          <p><strong>检测方法：</strong></p>
          <ul>
            <li>四分位距法：小于 Q₁ - 1.5×IQR 或大于 Q₃ + 1.5×IQR</li>
            <li>Z-score 法：|z| > 3</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>欺诈检测、质量控制异常监测、数据清洗、医疗异常诊断</p>
        </div>

        <h3 class="mt-5 mb-3">7. 关联性度量</h3>

        <div class="mb-4">
          <h4>协方差 (Covariance)</h4>
          <p>衡量两个变量一起变化的程度。</p>
          <div class="formula-box">
            <span class="katex katex-display">Cov(X,Y) = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>(x<sub class="katex-subscript">i</sub> - <span class="katex-symbol">x̄</span>)(y<sub class="katex-subscript">i</sub> - <span class="katex-symbol">ȳ</span>)</span>
          </div>
          <ul>
            <li>正值：正相关（一个变量增加，另一个也增加）</li>
            <li>负值：负相关（一个变量增加，另一个减少）</li>
            <li>零值：无线性关系</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>投资组合风险评估、经济学变量分析、气象数据关联分析</p>
        </div>

        <div class="mb-4">
          <h4>皮尔逊相关系数 (Pearson Correlation Coefficient)</h4>
          <p>衡量两个变量之间的线性相关强度，取值范围 [-1, 1]。</p>
          <div class="formula-box">
            <span class="katex katex-display">r = <span class="katex-fraction"><span class="katex-numerator"><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>(x<sub class="katex-subscript">i</sub> - <span class="katex-symbol">x̄</span>)(y<sub class="katex-subscript">i</sub> - <span class="katex-symbol">ȳ</span>)</span><span class="katex-denominator"><span class="katex-sqrt"><span class="katex-sqrt-root"><span class="katex-op">∑</span><sub class="katex-subscript">i=1</span></span></span><sup class="katex-superscript">n</sub>(x<sub class="katex-subscript">i</sub> - <span class="katex-symbol">x̄</span>)<sup class="katex-superscript">2</sup></sup><span class="katex-sqrt"><span class="katex-sqrt-root"><span class="katex-op">∑</span><sub class="katex-subscript">i=1</span></span></span><sup class="katex-superscript">n</sub>(y<sub class="katex-subscript">i</sub> - <span class="katex-symbol">ȳ</span>)<sup class="katex-superscript">2</sup></sup></span></span></span></span>
          </div>
          <ul>
            <li>r = 1：完全正相关</li>
            <li>r = -1：完全负相关</li>
            <li>r = 0：无线性相关</li>
            <li>|r| > 0.7：强相关</li>
            <li>0.3 < |r| < 0.7：中等相关</li>
            <li>|r| < 0.3：弱相关</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>市场调研（产品关联度分析）、教育研究（学习时间与成绩关系）、医学研究（风险因素分析）</p>
        </div>

        <div class="mb-4">
          <h4>斯皮尔曼等级相关系数 (Spearman's Rank Correlation)</h4>
          <p>基于变量秩次的相关系数，用于衡量单调关系。</p>
          <p class="text-muted"><strong>应用：</strong>非线性关系分析、问卷调查满意度排序、体育比赛排名分析</p>
        </div>

        <h3 class="mt-5 mb-3">8. 频数分布</h3>

        <div class="mb-4">
          <h4>频数分布表</h4>
          <p>将数据按数值大小分组，统计每组中数据出现的次数。</p>
          <p class="text-muted"><strong>应用：</strong>人口年龄结构分析、考试成绩分布、销售数据区间统计</p>
        </div>

        <div class="mb-4">
          <h4>直方图 (Histogram)</h4>
          <p>用矩形的高度表示各组频数的图形，常用于展示数据分布形态。</p>
          <p class="text-muted"><strong>应用：</strong>数据质量检查、分布模式识别、异常值可视化</p>
        </div>

        <div class="mb-4">
          <h4>箱线图 (Box Plot)</h4>
          <p>基于五数概括（最小值、Q1、中位数、Q3、最大值）的图形，能清晰展示数据分布和离群值。</p>
          <p class="text-muted"><strong>应用：</strong>多组数据比较、离群值检测、质量控制监控</p>
        </div>

        <h3 class="mt-5 mb-3">9. 特殊统计量</h3>

        <div class="mb-4">
          <h4>标准误差 (Standard Error, SE)</h4>
          <p>样本统计量的标准差，用于衡量抽样误差的大小。</p>
          <div class="formula-box">
            <span class="katex katex-display">SE = <span class="katex-fraction"><span class="katex-numerator"><span class="katex-symbol">σ</span></span></span><span class="katex-denominator"><span class="katex-sqrt"><span class="katex-sqrt-root">n</span></span></span></span></span></span></span>
          </div>
          <p class="text-muted"><strong>应用：</strong>置信区间计算、假设检验、样本量确定</p>
        </div>

        <div class="mb-4">
          <h4>自由度 (Degrees of Freedom)</h4>
          <p>统计量中可以自由变化的数据个数。</p>
          <p class="text-muted"><strong>应用：</strong>t 检验、卡方检验、方差分析（ANOVA）中的关键参数</p>
        </div>

        <div class="mb-4">
          <h4>效应量 (Effect Size)</h4>
          <p>衡量统计显著性的实际意义，表示差异或关联的强度。</p>
          <p class="text-muted"><strong>应用：</strong>元分析、干预效果评估、临床研究（如 Cohen's d）</p>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">📐 高级描述性统计</h2>

        <h3 class="mt-4 mb-3">9. 矩 (Moments)</h3>

        <div class="mb-4">
          <h4>k 阶原点矩</h4>
          <p>描述随机变量关于原点的分布特征：</p>
          <div class="formula-box">
            <span class="katex katex-display">m<sub class="katex-subscript">k</sub> = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>x<sub class="katex-subscript">i</sub><sup class="katex-superscript">k</sup></span>
          </div>
          <p class="text-muted">k=1 时为均值，k=2 时为原点二阶矩。</p>
        </div>

        <div class="mb-4">
          <h4>k 阶中心矩</h4>
          <p>描述随机变量关于均值的分布特征：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">μ</span><sub class="katex-subscript">k</sub> = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>(x<sub class="katex-subscript">i</sub> - <span class="katex-symbol">x̄</span>)<sup class="katex-superscript">k</sup></span>
          </div>
          <ul>
            <li>k=2：方差</li>
            <li>k=3：偏度（反映对称性）</li>
            <li>k=4：峰度（反映尖锐程度）</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>分布形状分析、高阶统计特征提取、信号处理</p>
        </div>

        <div class="mb-4">
          <h4>样本矩与总体矩</h4>
          <p>样本矩用于估计总体矩，是矩估计法的基础：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">m̂</span><sub class="katex-subscript">k</sub> = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>X<sub class="katex-subscript">i</sub><sup class="katex-superscript">k</sup> \xrightarrow{P} E[X<sup class="katex-superscript">k</sup>]</span>
          </div>
          <p class="text-muted"><strong>应用：</strong>参数估计、分布拟合、统计推断</p>
        </div>

        <h3 class="mt-5 mb-3">10. 分位数函数 (Quantile Function)</h3>

        <div class="mb-4">
          <h4>分位数定义</h4>
          <p>对于概率 p，p 分位数 Q(p) 满足：</p>
          <div class="formula-box">
            <span class="katex katex-display">F(Q(p)) = P(X <span class="katex-symbol">≤</span> Q(p)) = p</span>
          </div>
          <p class="text-muted">其中 F(x) 是累积分布函数。</p>
        </div>

        <div class="mb-4">
          <h4>样本分位数计算方法</h4>
          <p>常用的分位数计算方法有 9 种（R 语言中 type=1 到 type=9）：</p>
          <div class="formula-box">
            <span class="katex katex-display">Q(p) = (1-<span class="katex-symbol">γ</span>)x<sub class="katex-subscript">(j)</sub> + <span class="katex-symbol">γ</span> x<sub class="katex-subscript">(j+1)</sub></span>
          </div>
          <p class="text-muted">其中 <span class="katex katex-inline">j = \lfloor (n-1)p \rfloor + 1</span>，<span class="katex katex-inline"><span class="katex-symbol">γ</span> = (n-1)p - j + 1</span>。</p>
          <p class="text-muted"><strong>应用：</strong>风险价值计算、百分位数排名、箱线图绘制</p>
        </div>

        <div class="mb-4">
          <h4>重要分位数</h4>
          <ul>
            <li><strong>中位数</strong>：0.5 分位数，Q(0.5)</li>
            <li><strong>四分位数</strong>：Q(0.25), Q(0.5), Q(0.75)</li>
            <li><strong>十分位数</strong>：Q(0.1), Q(0.2), ..., Q(0.9)</li>
            <li><strong>百分位数</strong>：Q(0.01), Q(0.02), ..., Q(0.99)</li>
          </ul>
        </div>

        <h3 class="mt-5 mb-3">11. 累积分布与经验分布</h3>

        <div class="mb-4">
          <h4>经验累积分布函数 (ECDF)</h4>
          <p>基于样本数据的累积分布函数估计：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">F̂</span><sub class="katex-subscript">n</sub>(x) = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>I(x<sub class="katex-subscript">i</sub> <span class="katex-symbol">≤</span> x)</span>
          </div>
          <p class="text-muted">其中 I(·) 是指示函数。</p>
          <p class="text-muted"><strong>性质：</strong></p>
          <ul>
            <li>单调不减</li>
            <li>右连续</li>
            <li>在数据点处跳跃，跳跃高度为 1/n</li>
            <li>一致收敛到真实 CDF（Glivenko-Cantelli 定理）</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>分布检验、置信区间构造、非参数统计</p>
        </div>

        <div class="mb-4">
          <h4>分位数-分位数图 (Q-Q Plot)</h4>
          <p>用于检验数据是否服从特定分布：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-text">绘制点: </span> (Q<sub class="katex-subscript">empirical</sub>(p), Q<sub class="katex-subscript">theoretical</sub>(p))</span>
          </div>
          <p class="text-muted"><strong>应用：</strong>正态性检验、分布比较、异常值识别</p>
        </div>

        <div class="mb-4">
          <h4>概率-概率图 (P-P Plot)</h4>
          <p>用于比较两个累积分布函数：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-text">绘制点: </span> (F<sub class="katex-subscript">1</sub>(x), F<sub class="katex-subscript">2</sub>(x))</span>
          </div>
          <p class="text-muted"><strong>应用：</strong>分布拟合优度检验、模型诊断</p>
        </div>

        <h3 class="mt-5 mb-3">12. 密度估计</h3>

        <div class="mb-4">
          <h4>直方图密度估计</h4>
          <p>最简单的密度估计方法：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">f̂</span>(x) = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">nh</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>I<span class="katex-paren">(</span><span class="katex-fraction"><span class="katex-numerator">x<sub class="katex-subscript">i</sub> - x</span><span class="katex-denominator">h</span></span></span> <span class="katex-symbol">≤</span> <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">2</span></span></span><span class="katex-paren">)</span></span></span>
          </div>
          <p class="text-muted">其中 h 是带宽（箱宽），n 是样本量。</p>
          <p class="text-muted"><strong>缺点：</strong>不连续，受带宽选择影响大</p>
        </div>

        <div class="mb-4">
          <h4>核密度估计 (Kernel Density Estimation, KDE)</h4>
          <p>使用核函数平滑直方图：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">f̂</span><sub class="katex-subscript">h</sub>(x) = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">nh</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>K<span class="katex-paren">(</span><span class="katex-fraction"><span class="katex-numerator">x - x<sub class="katex-subscript">i</sub></span><span class="katex-denominator">h</span></span></span><span class="katex-paren">)</span></span></span>
          </div>
          <p class="text-muted"><strong>常用核函数：</strong></p>
          <ul>
            <li>高斯核：<span class="katex katex-inline">K(u) = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator"><span class="katex-sqrt"><span class="katex-sqrt-root">2<span class="katex-symbol">π</span></span></span></span></span></span></span>e<sup class="katex-superscript">-u<sup class="katex-superscript">2</sup>/2</sup></span></li>
            <li>Epanechnikov 核：<span class="katex katex-inline">K(u) = <span class="katex-fraction"><span class="katex-numerator">3</span><span class="katex-denominator">4</span></span></span>(1-u<sup class="katex-superscript">2</sup>)</span> for |u| ≤ 1</li>
            <li>三角核：<span class="katex katex-inline">K(u) = 1 - |u|</span> for |u| ≤ 1</li>
          </ul>
          <p class="text-muted"><strong>带宽选择：</strong></p>
          <ul>
            <li>Silverman 法则：<span class="katex katex-inline">h = 1.06<span class="katex-symbol"><span class="katex-symbol">σ</span>̂</span>n<sup class="katex-superscript">-1/5</sup></span></li>
            <li>交叉验证法</li>
          </ul>
          <p class="text-muted"><strong>应用：</strong>数据可视化、模式识别、非参数统计推断</p>
        </div>

        <h3 class="mt-5 mb-3">13. 数据变换</h3>

        <div class="mb-4">
          <h4>Box-Cox 变换</h4>
          <p>用于使数据更接近正态分布：</p>
          <div class="formula-box">
            <span class="katex katex-display">y(<span class="katex-symbol">λ</span>) = <span class="katex-cases"><span class="katex-case-row"><span class="katex-case-condition"><span class="katex-fraction"><span class="katex-numerator">x^<span class="katex-symbol">λ</span> - 1</span><span class="katex-denominator"><span class="katex-symbol">λ</span></span></span></span></span></span><span class="katex-case-value"><span class="katex-symbol">λ</span> <span class="katex-symbol">≠</span> 0</span></span></span><span class="katex-case-row"><span class="katex-case-condition"><span class="katex-operator">ln</span>(x)</span><span class="katex-case-value"><span class="katex-symbol">λ</span> = 0</span></span></span></span></span></span>
          </div>
          <p class="text-muted"><strong>参数选择：</strong>通过最大似然估计选择 λ</p>
          <p class="text-muted"><strong>应用：</strong>方差稳定化、正态化、回归分析预处理</p>
        </div>

        <div class="mb-4">
          <h4>Yeo-Johnson 变换</h4>
          <p>Box-Cox 变换的扩展，允许负值：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">ψ</span>(y,<span class="katex-symbol">λ</span>) = <span class="katex-cases"><span class="katex-case-row"><span class="katex-case-condition"><span class="katex-fraction"><span class="katex-numerator">(y+1)^<span class="katex-symbol">λ</span> - 1</span><span class="katex-denominator"><span class="katex-symbol">λ</span></span></span></span></span></span><span class="katex-case-value"><span class="katex-symbol">λ</span> <span class="katex-symbol">≠</span> 0, y <span class="katex-symbol">≥</span> 0</span></span></span><span class="katex-case-row"><span class="katex-case-condition"><span class="katex-operator">ln</span>(y+1)</span><span class="katex-case-value"><span class="katex-symbol">λ</span> = 0, y <span class="katex-symbol">≥</span> 0</span></span></span><span class="katex-case-row"><span class="katex-case-condition"><span class="katex-fraction"><span class="katex-numerator">(-y+1)<sup class="katex-superscript">2-<span class="katex-symbol">λ</span></sup> - 1</span><span class="katex-denominator">2-<span class="katex-symbol">λ</span></span></span></span></span></span><span class="katex-case-value"><span class="katex-symbol">λ</span> <span class="katex-symbol">≠</span> 2, y < 0</span></span></span><span class="katex-case-row"><span class="katex-case-condition">-<span class="katex-operator">ln</span>(-y+1)</span><span class="katex-case-value"><span class="katex-symbol">λ</span> = 2, y < 0</span></span></span></span></span></span>
          </div>
          <p class="text-muted"><strong>应用：</strong>处理含负值数据、机器学习特征工程</p>
        </div>

        <div class="mb-4">
          <h4>对数变换</h4>
          <p>用于处理右偏数据：</p>
          <div class="formula-box">
            <span class="katex katex-display">y = <span class="katex-operator">ln</span>(x + c)</span>
          </div>
          <p class="text-muted">其中 c 是常数，用于处理零值或负值。</p>
          <p class="text-muted"><strong>应用：</strong>收入数据分析、金融数据分析、乘性模型</p>
        </div>

        <h3 class="mt-5 mb-3">14. 多元描述性统计</h3>

        <div class="mb-4">
          <h4>均值向量</h4>
          <p>多元数据的中心位置：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">\mathbf{x̄</span>} = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>\mathbf{x}<sub class="katex-subscript">i</sub> = <span class="katex-matrix">(<span class="katex-symbol">x̄</span><sub class="katex-subscript">1</sub><br><span class="katex-symbol">x̄</span><sub class="katex-subscript">2</sub><br>\vdots<br><span class="katex-symbol">x̄</span><sub class="katex-subscript">p</sub>)</span></span></span>
          </div>
        </div>

        <div class="mb-4">
          <h4>协方差矩阵</h4>
          <p>描述变量间的协方差结构：</p>
          <div class="formula-box">
            <span class="katex katex-display">\mathbf{S} = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>(\mathbf{x}<sub class="katex-subscript">i</sub> - <span class="katex-symbol">\mathbf{x̄</span>})(\mathbf{x}<sub class="katex-subscript">i</sub> - <span class="katex-symbol">\mathbf{x̄</span>})<sup class="katex-superscript">T</sup> = <span class="katex-matrix">(s<sub class="katex-subscript">11</sub>&nbsp;&nbsp;s<sub class="katex-subscript">12</sub>&nbsp;&nbsp;\cdots&nbsp;&nbsp;s<sub class="katex-subscript">1p</sub><br>s<sub class="katex-subscript">21</sub>&nbsp;&nbsp;s<sub class="katex-subscript">22</sub>&nbsp;&nbsp;\cdots&nbsp;&nbsp;s<sub class="katex-subscript">2p</sub><br>\vdots&nbsp;&nbsp;\vdots&nbsp;&nbsp;\ddots&nbsp;&nbsp;\vdots<br>s<sub class="katex-subscript">p1</sub>&nbsp;&nbsp;s<sub class="katex-subscript">p2</sub>&nbsp;&nbsp;\cdots&nbsp;&nbsp;s<sub class="katex-subscript">pp</sub>)</span></span></span>
          </div>
          <p class="text-muted">其中 <span class="katex katex-inline">s<sub class="katex-subscript">jk</sub> = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>(x<sub class="katex-subscript">ij</sub> - <span class="katex-symbol">x̄</span><sub class="katex-subscript">j</sub>)(x<sub class="katex-subscript">ik</sub> - <span class="katex-symbol">x̄</span><sub class="katex-subscript">k</sub>)</span></p>
        </div>

        <div class="mb-4">
          <h4>相关矩阵</h4>
          <p>描述变量间的相关性：</p>
          <div class="formula-box">
            <span class="katex katex-display">\mathbf{R} = <span class="katex-matrix">(1&nbsp;&nbsp;r<sub class="katex-subscript">12</sub>&nbsp;&nbsp;\cdots&nbsp;&nbsp;r<sub class="katex-subscript">1p</sub><br>r<sub class="katex-subscript">21</sub>&nbsp;&nbsp;1&nbsp;&nbsp;\cdots&nbsp;&nbsp;r<sub class="katex-subscript">2p</sub><br>\vdots&nbsp;&nbsp;\vdots&nbsp;&nbsp;\ddots&nbsp;&nbsp;\vdots<br>r<sub class="katex-subscript">p1</sub>&nbsp;&nbsp;r<sub class="katex-subscript">p2</sub>&nbsp;&nbsp;\cdots&nbsp;&nbsp;1)</span></span></span>
          </div>
          <p class="text-muted">其中 <span class="katex katex-inline">r<sub class="katex-subscript">jk</sub> = <span class="katex-fraction"><span class="katex-numerator">s<sub class="katex-subscript">jk</sub></span><span class="katex-denominator"><span class="katex-sqrt"><span class="katex-sqrt-root">s<sub class="katex-subscript">jj</span></span></span>s<sub class="katex-subscript">kk</sub></span></span></span></sub></span></p>
          <p class="text-muted"><strong>应用：</strong>主成分分析、因子分析、多重共线性诊断</p>
        </div>

        <div class="mb-4">
          <h4>广义方差</h4>
          <p>协方差矩阵的行列式，衡量多元数据的离散程度：</p>
          <div class="formula-box">
            <span class="katex katex-display">|\mathbf{S}| = \det(\mathbf{S})</span>
          </div>
          <p class="text-muted"><strong>应用：</strong>多元质量控制、马氏距离计算</p>
        </div>

        <div class="mb-4">
          <h4>马氏距离 (Mahalanobis Distance)</h4>
          <p>考虑协方差结构的距离度量：</p>
          <div class="formula-box">
            <span class="katex katex-display">D<sup class="katex-superscript">2</sup>(\mathbf{x}, \boldsymbol{<span class="katex-symbol">μ</span>}) = (\mathbf{x} - \boldsymbol{<span class="katex-symbol">μ</span>})<sup class="katex-superscript">T</sup>\mathbf{S}<sup class="katex-superscript">-1</sup>(\mathbf{x} - \boldsymbol{<span class="katex-symbol">μ</span>})</span>
          </div>
          <p class="text-muted"><strong>特点：</strong>对变量的尺度变化和相关性不敏感</p>
          <p class="text-muted"><strong>应用：</strong>多元异常值检测、模式识别、分类问题</p>
        </div>

        <h3 class="mt-5 mb-3">15. 稳健统计量</h3>

        <div class="mb-4">
          <h4>中位数绝对偏差 (Median Absolute Deviation, MAD)</h4>
          <p>基于中位数的离散程度度量，对离群值稳健：</p>
          <div class="formula-box">
            <span class="katex katex-display">MAD = <span class="katex-text">median</span>(|x<sub class="katex-subscript">i</sub> - <span class="katex-text">median</span>(x)|)</span>
          </div>
          <p class="text-muted">与标准差的关系：<span class="katex katex-inline"><span class="katex-symbol">σ</span> <span class="katex-symbol">≈</span> 1.4826 <span class="katex-symbol">×</span> MAD</span>（对于正态分布）</p>
          <p class="text-muted"><strong>应用：</strong>稳健的异常值检测、质量控制</p>
        </div>

        <div class="mb-4">
          <h4>截尾均值 (Trimmed Mean)</h4>
          <p>去除一定比例极值后的均值：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">x̄</span><sub class="katex-subscript"><span class="katex-symbol">α</span></sub> = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n(1-2<span class="katex-symbol">α</span>)</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=k+1</sub><sup class="katex-superscript">n-k</sup>x<sub class="katex-subscript">(i)</sub></span>
          </div>
          <p class="text-muted">其中 <span class="katex katex-inline">k = \lfloor <span class="katex-symbol">α</span> n \rfloor</span>，<span class="katex katex-inline">x<sub class="katex-subscript">(i)</sub></span> 是有序样本。</p>
          <p class="text-muted"><strong>应用：</strong>体育比赛评分（去除最高最低分）、收入数据分析</p>
        </div>

        <div class="mb-4">
          <h4>Winsorized 均值</h4>
          <p>将极值替换为边界值后的均值：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">x̄</span><sub class="katex-subscript">w</sub> = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-paren">(</span>kx<sub class="katex-subscript">(k+1)</sub> + <span class="katex-op">∑</span><sub class="katex-subscript">i=k+1</sub><sup class="katex-superscript">n-k</sup>x<sub class="katex-subscript">(i)</sub> + kx<sub class="katex-subscript">(n-k)</sub><span class="katex-paren">)</span></span></span>
          </div>
          <p class="text-muted"><strong>应用：</strong>稳健的集中趋势估计、金融数据分析</p>
        </div>

        <h3 class="mt-5 mb-3">16. 时间序列描述性统计</h3>

        <div class="mb-4">
          <h4>自协方差函数</h4>
          <p>衡量时间序列在不同时滞下的相关性：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">γ</span>(k) = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n</span></span></span><span class="katex-op">∑</span><sub class="katex-subscript">t=k+1</sub><sup class="katex-superscript">n</sup>(x<sub class="katex-subscript">t</sub> - <span class="katex-symbol">x̄</span>)(x<sub class="katex-subscript">t-k</sub> - <span class="katex-symbol">x̄</span>)</span>
          </div>
          <p class="text-muted"><strong>应用：</strong>时间序列分析、季节性检测</p>
        </div>

        <div class="mb-4">
          <h4>自相关函数 (ACF)</h4>
          <p>标准化的自协方差：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">ρ</span>(k) = <span class="katex-fraction"><span class="katex-numerator"><span class="katex-symbol">γ</span>(k)</span><span class="katex-denominator"><span class="katex-symbol">γ</span>(0)</span></span></span> = <span class="katex-fraction"><span class="katex-numerator"><span class="katex-op">∑</span><sub class="katex-subscript">t=k+1</sub><sup class="katex-superscript">n</sup>(x<sub class="katex-subscript">t</sub> - <span class="katex-symbol">x̄</span>)(x<sub class="katex-subscript">t-k</sub> - <span class="katex-symbol">x̄</span>)</span><span class="katex-denominator"><span class="katex-op">∑</span><sub class="katex-subscript">t=1</sub><sup class="katex-superscript">n</sup>(x<sub class="katex-subscript">t</sub> - <span class="katex-symbol">x̄</span>)<sup class="katex-superscript">2</sup></span></span></span></span>
          </div>
          <p class="text-muted"><strong>应用：</strong>自相关检验、模型识别（ARIMA）</p>
        </div>

        <div class="mb-4">
          <h4>偏自相关函数 (PACF)</h4>
          <p>控制中间滞后后的相关性：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">φ</span><sub class="katex-subscript">kk</sub> = <span class="katex-text">Corr</span>(x<sub class="katex-subscript">t</sub>, x<sub class="katex-subscript">t-k</sub> | x<sub class="katex-subscript">t-1</sub>, \ldots, x<sub class="katex-subscript">t-k+1</sub>)</span>
          </div>
          <p class="text-muted"><strong>应用：</strong>AR 模型阶数确定、时间序列建模</p>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">🧮 交互式计算器</h2>
        <p>输入一组数据（用逗号分隔），计算各种统计量：</p>

        <div class="mb-3">
          <label class="form-label">数据（用逗号分隔）：</label>
          <input
            type="text"
            class="form-control"
            id="dataInput"
            placeholder="例如：10, 20, 30, 40, 50"
            value="10, 20, 30, 40, 50"
          />
        </div>

        <button class="btn btn-custom btn-primary-custom" onclick="calculateStats()">
          计算统计量
        </button>

        <div id="statsResult" class="mt-4" style="display: none;">
          <h4 class="mb-3">计算结果：</h4>
          
          <h5 class="mt-4 mb-3">集中趋势</h5>
          <div class="row">
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">μ</div>
                  <div>
                    <strong>均值：</strong> <span id="meanValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">M</div>
                  <div>
                    <strong>中位数：</strong> <span id="medianValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-green">Mo</div>
                  <div>
                    <strong>众数：</strong> <span id="modeValue"></span>
                  </div>
                </li>
              </ul>
            </div>
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">G</div>
                  <div>
                    <strong>几何平均：</strong> <span id="geometricMeanValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">H</div>
                  <div>
                    <strong>调和平均：</strong> <span id="harmonicMeanValue"></span>
                  </div>
                </li>
              </ul>
            </div>
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-green">Q1</div>
                  <div>
                    <strong>下四分位：</strong> <span id="q1Value"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-blue">Q3</div>
                  <div>
                    <strong>上四分位：</strong> <span id="q3Value"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">IQR</div>
                  <div>
                    <strong>四分位距：</strong> <span id="iqrValue"></span>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <h5 class="mt-4 mb-3">离散程度</h5>
          <div class="row">
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">σ²</div>
                  <div>
                    <strong>方差：</strong> <span id="varianceValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">σ</div>
                  <div>
                    <strong>标准差：</strong> <span id="stdDevValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-green">R</div>
                  <div>
                    <strong>极差：</strong> <span id="rangeValue"></span>
                  </div>
                </li>
              </ul>
            </div>
            <div class="col-md-4">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">CV</div>
                  <div>
                    <strong>变异系数：</strong> <span id="cvValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">MAD</div>
                  <div>
                    <strong>平均绝对偏差：</strong> <span id="madValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-green">SE</div>
                  <div>
                    <strong>标准误差：</strong> <span id="seValue"></span>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <h5 class="mt-4 mb-3">分布形状</h5>
          <div class="row">
            <div class="col-md-6">
              <ul class="feature-list">
                <li>
                  <div class="feature-icon icon-blue">Skew</div>
                  <div>
                    <strong>偏度：</strong> <span id="skewnessValue"></span>
                  </div>
                </li>
                <li>
                  <div class="feature-icon icon-pink">Kurt</div>
                  <div>
                    <strong>峰度：</strong> <span id="kurtosisValue"></span>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <h5 class="mt-4 mb-3">标准化数据（Z-Score）</h5>
          <div id="zscoreResult" class="content-card" style="background: rgba(33, 150, 243, 0.05);">
            <div class="row">
              <div class="col-md-6">
                <strong>原始数据：</strong> <span id="originalData"></span>
              </div>
              <div class="col-md-6">
                <strong>Z-Score：</strong> <span id="zscoreData"></span>
              </div>
            </div>
          </div>

          <div class="chart-container mt-4">
            <canvas id="dataChart"></canvas>
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">🛡️ 鲁棒统计量（Robust Statistics）</h2>

        <h3 class="mt-4 mb-3">什么是鲁棒统计量？</h3>
        <p>
          鲁棒统计量对离群值不敏感，即使数据中存在极端值也能保持稳定。
          在数据质量不确定时，鲁棒统计量比传统统计量更可靠。
        </p>

        <h3 class="mt-4 mb-3">常见鲁棒统计量</h3>

        <div class="mb-4">
          <h4>1. 中位数绝对偏差（Median Absolute Deviation, MAD）</h4>
          <p>数据点与中位数偏差的绝对值的中位数：</p>
          <div class="formula-box">
            <span class="katex katex-display">MAD = median(|x<sub class="katex-subscript">i</sub> - median(X)|)</span>
          </div>
          <p class="text-muted"><strong>优点：</strong>不受离群值影响，比标准差更稳健</p>
        </div>

        <div class="mb-4">
          <h4>2. 截尾均值（Trimmed Mean）</h4>
          <p>去除一定比例的极端值后的均值：</p>
          <div class="formula-box">
            <span class="katex katex-display"><span class="katex-symbol">x̄</span><sub class="katex-subscript">trimmed</sub> = <span class="katex-fraction"><span class="katex-numerator"><span class="katex-op">∑</span><sub class="katex-subscript">i=k+1</sub><sup class="katex-superscript">n-k</sup> x<sub class="katex-subscript">(i)</sub></span><span class="katex-denominator">n - 2k</span></span></span>
          </div>
          <p class="text-muted">常见的是 5% 或 10% 截尾均值</p>
        </div>

        <div class="mb-4">
          <h4>3. Winzorized 均值</h4>
          <p>将一定比例的极端值替换为剩余值的边界值，然后计算均值</p>
          <p class="text-muted"><strong>优点：</strong>保留了样本量，比截尾均值更常用</p>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">🔄 数据变换（Data Transformation）</h2>

        <h3 class="mt-4 mb-3">为什么需要数据变换？</h3>
        <ul>
          <li>使数据更接近正态分布</li>
          <li>稳定方差（方差齐性）</li>
          <li>改善线性关系</li>
          <li>减少离群值的影响</li>
        </ul>

        <h3 class="mt-4 mb-3">常见变换方法</h3>

        <div class="mb-4">
          <h4>1. 对数变换（Log Transformation）</h4>
          <p>适用于右偏数据、乘性模型：</p>
          <div class="formula-box">
            <span class="katex katex-display">y' = log(x + c)</span>
          </div>
          <p class="text-muted">c 是常数，用于处理零值或负值</p>
          <p><strong>应用：</strong>收入分析、金融数据、微生物计数</p>
        </div>

        <div class="mb-4">
          <h4>2. 平方根变换（Square Root Transformation）</h4>
          <p>适用于计数数据（泊松分布）：</p>
          <div class="formula-box">
            <span class="katex katex-display">y' = <span class="katex-sqrt"><span class="katex-sqrt-root">x</span></span></span>
          </div>
          <p><strong>应用：</strong>事件计数、缺陷数量、放射性衰变</p>
        </div>

        <div class="mb-4">
          <h4>3. 倒数变换（Reciprocal Transformation）</h4>
          <p>适用于高度右偏数据：</p>
          <div class="formula-box">
            <span class="katex katex-display">y' = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">x</span></span></span>
          </div>
          <p><strong>应用：</strong>反应时间、电阻值、某些物理测量</p>
        </div>

        <div class="mb-4">
          <h4>4. Box-Cox 变换</h4>
          <p>自动寻找最优变换参数 λ：</p>
          <div class="formula-box">
            <span class="katex katex-display">y' = <span class="katex-cases"><span class="katex-case-row"><span class="katex-case-condition"><span class="katex-fraction"><span class="katex-numerator">x<sup class="katex-superscript"><span class="katex-symbol">λ</span></sup> - 1</span><span class="katex-denominator"><span class="katex-symbol">λ</span></span></span></span></span><span class="katex-case-value"><span class="katex-symbol">λ</span> ≠ 0</span></span></span><span class="katex-case-row"><span class="katex-case-condition">ln(x)</span><span class="katex-case-value"><span class="katex-symbol">λ</span> = 0</span></span></span></span></span>
          </div>
          <p class="text-muted"><strong>优点：</strong>通过最大似然估计自动选择 λ</p>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">📐 多变量描述统计</h2>

        <h3 class="mt-4 mb-3">协方差矩阵（Covariance Matrix）</h3>
        <p>描述多个变量之间的协方差结构：</p>
        <div class="formula-box">
          <span class="katex katex-display">\mathbf{S} = <span class="katex-fraction"><span class="katex-numerator">1</span><span class="katex-denominator">n-1</span></span><span class="katex-op">∑</span><sub class="katex-subscript">i=1</sub><sup class="katex-superscript">n</sup>(\mathbf{x}<sub class="katex-subscript">i</sub> - <span class="katex-symbol">\mathbf{x̄</span>})(\mathbf{x}<sub class="katex-subscript">i</sub> - <span class="katex-symbol">\mathbf{x̄</span>)<sup class="katex-superscript">T</sup></span>
        </div>

        <h3 class="mt-4 mb-3">相关矩阵（Correlation Matrix）</h3>
        <p>描述多个变量之间的线性相关强度：</p>
        <div class="formula-box">
          <span class="katex katex-display">\mathbf{R} = <span class="katex-matrix">(1 &nbsp;&nbsp;r<sub class="katex-subscript">12</sub> &nbsp;&nbsp;··· &nbsp;&nbsp;r<sub class="katex-subscript">1p</sub><br>r<sub class="katex-subscript">21</sub> &nbsp;&nbsp;1 &nbsp;&nbsp;··· &nbsp;&nbsp;r<sub class="katex-subscript">2p</sub><br>⋮ &nbsp;&nbsp;⋮ &nbsp;&nbsp;⋱ &nbsp;&nbsp;⋮<br>r<sub class="katex-subscript">p1</sub> &nbsp;&nbsp;r<sub class="katex-subscript">p2</sub> &nbsp;&nbsp;··· &nbsp;&nbsp;1)</span></span></span>
        </div>

        <h3 class="mt-4 mb-3">马氏距离（Mahalanobis Distance）</h3>
        <p>考虑协方差结构的距离度量：</p>
        <div class="formula-box">
          <span class="katex katex-display">D<sub class="katex-subscript">M</sub>(\mathbf{x}) = <span class="katex-sqrt"><span class="katex-sqrt-root">(\mathbf{x} - <span class="katex-symbol">\mathbf{x̄</span>)<sup class="katex-superscript">T</sup>\mathbf{S}<sup class="katex-superscript">-1</sup>(\mathbf{x} - <span class="katex-symbol">\mathbf{x̄</span>)</span></span></span>
        </div>
        <p class="text-muted"><strong>应用：</strong>多元离群值检测、模式识别、质量控制</p>
      </div>

      <div class="content-card">
        <h2 class="card-title">💡 实际应用</h2>
        <ul class="feature-list">
          <li>
            <div class="feature-icon icon-blue">🏢</div>
            <div>
              <strong>商业分析：</strong> 分析销售数据、客户行为，优化业务决策
            </div>
          </li>
          <li>
            <div class="feature-icon icon-pink">🏥</div>
            <div>
              <strong>医疗研究：</strong> 评估治疗效果、疾病流行趋势
            </div>
          </li>
          <li>
            <div class="feature-icon icon-green">📊</div>
            <div>
              <strong>质量控制：</strong> 监测生产过程中的产品一致性
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <script src="assets/bootstrap-custom.js"></script>
  <script src="assets/katex-custom.js"></script>
  <script src="assets/chartjs-custom.js"></script>
  <script>
    let chartInstance = null;

    function calculateStats() {
      const input = document.getElementById('dataInput').value;
      const numbers = input.split(',').map(n => parseFloat(n.trim())).filter(n => !isNaN(n));

      if (numbers.length === 0) {
        alert('请输入有效的数据');
        return;
      }

      const sorted = [...numbers].sort((a, b) => a - b);
      const n = numbers.length;
      const sum = numbers.reduce((a, b) => a + b, 0);
      const mean = sum / n;
      
      // 中位数
      const median = n % 2 === 0
        ? (sorted[n / 2 - 1] + sorted[n / 2]) / 2
        : sorted[Math.floor(n / 2)];

      // 众数
      const modeMap = numbers.reduce((acc, num) => {
        acc[num] = (acc[num] || 0) + 1;
        return acc;
      }, {});
      const maxCount = Math.max(...Object.values(modeMap));
      const modeValue = Object.entries(modeMap).filter(([_, count]) => count === maxCount).map(([num]) => num).join(', ');

      // 四分位数
      const getQuartile = (arr, q) => {
        const pos = (arr.length - 1) * q;
        const base = Math.floor(pos);
        const rest = pos - base;
        if (arr[base + 1] !== undefined) {
          return arr[base] + rest * (arr[base + 1] - arr[base]);
        } else {
          return arr[base];
        }
      };
      const q1 = getQuartile(sorted, 0.25);
      const q3 = getQuartile(sorted, 0.75);
      const iqr = q3 - q1;

      // 几何平均数（仅正数）
      let geometricMean = 'N/A';
      if (numbers.every(x => x > 0)) {
        geometricMean = Math.pow(numbers.reduce((a, b) => a * b, 1), 1 / n).toFixed(4);
      }

      // 调和平均数（非零且同号）
      let harmonicMean = 'N/A';
      if (numbers.every(x => x !== 0) && numbers.every(x => x > 0)) {
        harmonicMean = (n / numbers.reduce((a, b) => a + 1/b, 0)).toFixed(4);
      }

      // 方差和标准差
      const variance = numbers.reduce((acc, num) => acc + Math.pow(num - mean, 2), 0) / n;
      const stdDev = Math.sqrt(variance);

      // 极差
      const range = sorted[n - 1] - sorted[0];

      // 变异系数
      const cv = mean !== 0 ? ((stdDev / mean) * 100).toFixed(2) + '%' : 'N/A';

      // 平均绝对偏差
      const mad = numbers.reduce((acc, num) => acc + Math.abs(num - mean), 0) / n;

      // 标准误差
      const se = stdDev / Math.sqrt(n);

      // 偏度
      const skewness = n > 2 ? (numbers.reduce((acc, num) => acc + Math.pow((num - mean) / stdDev, 3), 0) / n).toFixed(4) : 'N/A';

      // 峰度
      const kurtosis = n > 3 ? (3 + numbers.reduce((acc, num) => acc + Math.pow((num - mean) / stdDev, 4), 0) / n - 3).toFixed(4) : 'N/A';

      // Z-Score
      const zScores = numbers.map(x => ((x - mean) / stdDev).toFixed(2));

      // 更新显示
      document.getElementById('meanValue').textContent = mean.toFixed(4);
      document.getElementById('medianValue').textContent = median.toFixed(4);
      document.getElementById('modeValue').textContent = modeValue;
      document.getElementById('geometricMeanValue').textContent = geometricMean;
      document.getElementById('harmonicMeanValue').textContent = harmonicMean;
      document.getElementById('q1Value').textContent = q1.toFixed(4);
      document.getElementById('q3Value').textContent = q3.toFixed(4);
      document.getElementById('iqrValue').textContent = iqr.toFixed(4);
      document.getElementById('varianceValue').textContent = variance.toFixed(4);
      document.getElementById('stdDevValue').textContent = stdDev.toFixed(4);
      document.getElementById('rangeValue').textContent = range.toFixed(4);
      document.getElementById('cvValue').textContent = cv;
      document.getElementById('madValue').textContent = mad.toFixed(4);
      document.getElementById('seValue').textContent = se.toFixed(4);
      document.getElementById('skewnessValue').textContent = skewness;
      document.getElementById('kurtosisValue').textContent = kurtosis;
      document.getElementById('originalData').textContent = numbers.map(x => x.toFixed(2)).join(', ');
      document.getElementById('zscoreData').textContent = zScores.join(', ');

      document.getElementById('statsResult').style.display = 'block';

      // 更新图表
      const ctx = document.getElementById('dataChart').getContext('2d');

      if (chartInstance) {
        chartInstance.destroy();
      }

      chartInstance = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: numbers.map((_, i) => `数据<span class="katex katex-inline">{i + 1}`),
          datasets: [{
            label: '数据值',
            data: numbers,
            backgroundColor: numbers.map(x => Math.abs((x - mean) / stdDev) > 2 ? 'rgba(244, 67, 54, 0.6)' : 'rgba(33, 150, 243, 0.6)'),
            borderColor: numbers.map(x => Math.abs((x - mean) / stdDev) > 2 ? 'rgba(244, 67, 54, 1)' : 'rgba(33, 150, 243, 1)'),
            borderWidth: 1,
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'top',
            },
            title: {
              display: true,
              text: `数据分布可视化 (均值: </span>{mean.toFixed(2)}, 标准差: <span class="katex katex-inline">{stdDev.toFixed(2)})`,
            },
            annotation: {
              annotations: {
                line1: {
                  type: 'line',
                  yMin: mean,
                  yMax: mean,
                  borderColor: 'rgba(76, 175, 80, 0.8)',
                  borderWidth: 2,
                  borderDash: [5, 5],
                  label: {
                    display: true,
                    content: '均值',
                    position: 'end'
                  }
                }
              }
            }
          },
        }
      });
    }

    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '<span class="katex katex-display">', right: '</span>', display: true},
          {left: '</span>', right: '$', display: false}
        ]
      });
    });
  </script>
</body>
</html>