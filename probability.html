<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="概率论基础 - 掌握概率分布、贝叶斯定理、条件概率等重要理论">
  <title>概率论基础 - 统计学学习平台</title>
  <link rel="stylesheet" href="assets/bootstrap-custom.css">
  <link rel="stylesheet" href="assets/katex-custom.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-custom sticky-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">📊 统计学学习平台</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">首页</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="basics.html">统计学基础</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="probability.html">概率论</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="inference.html">统计推断</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="main-content">
    <div class="probability-page">
      <h1 class="page-title">概率论基础</h1>

      <div class="content-card">
        <h2 class="card-title">🎲 什么是概率？</h2>
        <p>
          概率是衡量事件发生可能性的数值，取值范围在 0 到 1 之间。
          0 表示不可能发生，1 表示必然发生。概率论是研究随机现象的数学理论。
        </p>
        <div class="formula-box">
          $$P(A) = \frac{\text{事件A发生的有利结果数}}{\text{所有可能结果的总数}}$$
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">📊 基本概念</h2>

        <h3 class="mt-4 mb-3">1. 条件概率</h3>
        <p>
          条件概率是在已知事件 B 发生的条件下，事件 A 发生的概率。
        </p>
        <div class="formula-box">
          $$P(A|B) = \frac{P(A \cap B)}{P(B)}$$
        </div>
        <p class="text-muted">其中 $P(A|B)$ 表示在 B 发生的条件下 A 发生的概率。</p>

        <h3 class="mt-4 mb-3">2. 乘法定理</h3>
        <p>
          两个事件同时发生的概率等于一个事件的概率乘以在该事件发生的条件下另一个事件的概率。
        </p>
        <div class="formula-box">
          $$P(A \cap B) = P(A) \times P(B|A) = P(B) \times P(A|B)$$
        </div>

        <h3 class="mt-4 mb-3">3. 贝叶斯定理</h3>
        <p>
          贝叶斯定理描述了条件概率之间的关系，是统计推断的重要工具。
        </p>
        <div class="formula-box">
          $$P(A|B) = \frac{P(B|A) \times P(A)}{P(B)}$$
        </div>
        <p class="text-muted">
          其中：
        </p>
        <ul>
          <li>$P(A)$ - 先验概率（在考虑 B 之前 A 的概率）</li>
          <li>$P(B|A)$ - 似然度（在 A 发生的条件下 B 发生的概率）</li>
          <li>$P(A|B)$ - 后验概率（在观察到 B 之后 A 的概率）</li>
        </ul>
      </div>

      <div class="content-card">
        <h2 class="card-title">🔄 大数定律演示</h2>
        <p>
          大数定律表明：当独立重复试验的次数趋近于无穷时，事件发生的频率会趋近于其理论概率。
        </p>

        <div class="mb-3">
          <label class="form-label">抛硬币次数：</label>
          <input
            type="number"
            class="form-control"
            id="coinFlips"
            value="10"
            min="1"
            max="1000"
          />
        </div>

        <button class="btn btn-custom btn-primary-custom" onclick="flipCoin()">
          开始抛硬币
        </button>

        <div id="flipResults" class="mt-4" style="display: none;">
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="content-card" style="border-left: 4px solid var(--primary-color);">
                <h4 class="mb-3">🌞 正面</h4>
                <h2 style="color: var(--primary-color);" id="headsCount">0 次</h2>
                <p class="text-muted" id="headsPercent">0%</p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="content-card" style="border-left: 4px solid var(--secondary-color);">
                <h4 class="mb-3">🌙 反面</h4>
                <h2 style="color: var(--secondary-color);" id="tailsCount">0 次</h2>
                <p class="text-muted" id="tailsPercent">0%</p>
              </div>
            </div>
          </div>

          <div class="chart-container">
            <canvas id="coinChart"></canvas>
          </div>

          <div class="alert alert-info mt-3">
            <strong>观察：</strong> 随着试验次数增加，正面比例会逐渐趋近于 50%。这就是大数定律的体现！
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="card-title">📈 常见概率分布</h2>

        <h3 class="mt-4 mb-3">1. 正态分布</h3>
        <p>
          正态分布（也称为高斯分布）是最重要的连续概率分布，许多自然现象都遵循正态分布。
        </p>
        <div class="formula-box">
          $$f(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{-\frac{(x-\mu)^2}{2\sigma^2}}$$
        </div>
        <p class="text-muted">
          其中 $\mu$ 是均值，$\sigma$ 是标准差。
        </p>

        <h3 class="mt-4 mb-3">2. 二项分布</h3>
        <p>
          二项分布描述了 n 次独立伯努利试验中成功次数的概率分布。
        </p>
        <div class="formula-box">
          $$P(X=k) = \binom{n}{k} p^k (1-p)^{n-k}$$
        </div>
        <p class="text-muted">
          其中 $n$ 是试验次数，$k$ 是成功次数，$p$ 是每次试验成功的概率。
        </p>
      </div>

      <div class="content-card">
        <h2 class="card-title">💡 贝叶斯定理应用示例</h2>
        <p>
          <strong>医疗检测问题：</strong> 某疾病的发病率为 0.1%，检测方法的准确率为 99%（即患病者检测为阳性的概率为 99%，健康者检测为阴性的概率为 99%）。
          如果一个人的检测结果为阳性，他真正患病的概率是多少？
        </p>
        <div class="formula-box">
          $$P(\text{患病}|\text{阳性}) = \frac{0.99 \times 0.001}{0.99 \times 0.001 + 0.01 \times 0.999} \approx 9\%$$
        </div>
        <p class="text-danger">
          <strong>结论：</strong> 即使检测准确率高达 99%，阳性结果下真正患病的概率只有约 9%！
          这就是为什么需要结合先验概率来判断。
        </p>
      </div>
    </div>
  </div>

  <footer class="footer">
    <p>© 2026 统计学学习平台 | 通过交互式学习掌握统计学</p>
  </footer>

  <script src="assets/bootstrap-custom.js"></script>
  <script src="assets/katex-custom.js"></script>
  <script src="assets/chartjs-custom.js"></script>
  <script>
    let coinChartInstance = null;
    let flipResults = [];

    function flipCoin() {
      const coinFlips = parseInt(document.getElementById('coinFlips').value) || 10;
      flipResults = [];

      for (let i = 0; i < coinFlips; i++) {
        flipResults.push(Math.random() < 0.5 ? '正面' : '反面');
      }

      const heads = flipResults.filter(f => f === '正面').length;
      const tails = flipResults.filter(f => f === '反面').length;
      const headsPercent = ((heads / flipResults.length) * 100).toFixed(1);
      const tailsPercent = ((tails / flipResults.length) * 100).toFixed(1);

      document.getElementById('headsCount').textContent = `${heads} 次`;
      document.getElementById('tailsCount').textContent = `${tails} 次`;
      document.getElementById('headsPercent').textContent = `${headsPercent}%`;
      document.getElementById('tailsPercent').textContent = `${tailsPercent}%`;

      document.getElementById('flipResults').style.display = 'block';

      // Update chart
      const ctx = document.getElementById('coinChart').getContext('2d');

      if (coinChartInstance) {
        coinChartInstance.destroy();
      }

      const cumulativeData = flipResults.map((_, i) => {
        const subFlips = flipResults.slice(0, i + 1);
        const h = subFlips.filter(f => f === '正面').length;
        return ((h / (i + 1)) * 100).toFixed(1);
      });

      coinChartInstance = new Chart(ctx, {
        type: 'line',
        data: {
          labels: flipResults.map((_, i) => i + 1),
          datasets: [{
            label: '累计正面比例',
            data: cumulativeData,
            borderColor: 'rgba(33, 150, 243, 1)',
            backgroundColor: 'rgba(33, 150, 243, 0.1)',
            tension: 0.4,
            fill: true,
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'top',
            },
            title: {
              display: true,
              text: '大数定律演示：正面比例随试验次数趋近于50%',
            },
          },
          scales: {
            y: {
              min: 0,
              max: 100,
              title: {
                display: true,
                text: '正面比例 (%)'
              }
            },
            x: {
              title: {
                display: true,
                text: '试验次数'
              }
            }
          }
        }
      });
    }

    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
        ]
      });
    });
  </script>
</body>
</html>